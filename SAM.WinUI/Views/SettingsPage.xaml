<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="SAM.WinUI.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SAM.WinUI.Views">

    <ScrollViewer>
        <StackPanel Padding="0,0,0,24" Spacing="4">
            <TextBlock x:Name="PageTitleText" Text="Settings" 
                       Style="{StaticResource TitleLargeTextBlockStyle}"
                       Margin="0,0,0,24"/>

            <!-- Appearance Section -->
            <TextBlock x:Name="AppearanceSectionText" Text="Appearance" 
                       Style="{StaticResource BodyStrongTextBlockStyle}"
                       Margin="0,0,0,8"/>
            
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="16">
                <StackPanel Spacing="16">
                    <!-- Theme Setting -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel>
                            <TextBlock x:Name="ThemeTitleText"
                                       Text="App theme" 
                                       Style="{StaticResource BodyTextBlockStyle}"/>
                            <TextBlock x:Name="ThemeDescriptionText"
                                       Text="Choose between Light, Dark, or System setting"
                                       Style="{StaticResource CaptionTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                        
                        <ComboBox x:Name="ThemeComboBox"
                                  Grid.Column="1"
                                  SelectedIndex="0"
                                  Width="200"
                                  SelectionChanged="ThemeComboBox_SelectionChanged">
                            <ComboBoxItem x:Name="ThemeSystemItem" Content="System"/>
                            <ComboBoxItem x:Name="ThemeLightItem" Content="Light"/>
                            <ComboBoxItem x:Name="ThemeDarkItem" Content="Dark"/>
                        </ComboBox>
                    </Grid>
                    
                    <!-- Language Setting -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel>
                            <TextBlock x:Name="LanguageTitleText"
                                       Text="Language" 
                                       Style="{StaticResource BodyTextBlockStyle}"/>
                            <TextBlock x:Name="LanguageDescriptionText"
                                       Text="Select your preferred language"
                                       Style="{StaticResource CaptionTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                        
                        <ComboBox x:Name="LanguageComboBox"
                                  Grid.Column="1"
                                  Width="200"
                                  SelectionChanged="LanguageComboBox_SelectionChanged"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Behavior Section -->
            <TextBlock x:Name="BehaviorSectionText" Text="Behavior" 
                       Style="{StaticResource BodyStrongTextBlockStyle}"
                       Margin="0,24,0,8"/>
            
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="16">
                <StackPanel Spacing="16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel>
                            <TextBlock x:Name="WarnUnsavedTitleText" Text="Warn on unsaved changes" 
                                       Style="{StaticResource BodyTextBlockStyle}"/>
                            <TextBlock x:Name="WarnUnsavedDescriptionText" Text="Shows a warning when leaving with unsaved changes"
                                       Style="{StaticResource CaptionTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                        
                        <ToggleSwitch x:Name="WarnUnsavedToggle"
                                      Grid.Column="1"
                                      Toggled="WarnUnsavedToggle_Toggled"/>
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel>
                            <TextBlock x:Name="ShowHiddenTitleText" Text="Show hidden achievements" 
                                       Style="{StaticResource BodyTextBlockStyle}"/>
                            <TextBlock x:Name="ShowHiddenDescriptionText" Text="Also displays hidden achievements in the list"
                                       Style="{StaticResource CaptionTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                        
                        <ToggleSwitch x:Name="ShowHiddenToggle"
                                      Grid.Column="1"
                                      Toggled="ShowHiddenToggle_Toggled"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Data Section -->
            <TextBlock x:Name="DataSectionText" Text="Data" 
                       Style="{StaticResource BodyStrongTextBlockStyle}"
                       Margin="0,24,0,8"/>
            
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="16">
                <StackPanel Spacing="16">
                    <!-- Force Fetch Library -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel>
                            <TextBlock x:Name="ForceFetchTitleText" Text="Sync Library Data" 
                                       Style="{StaticResource BodyTextBlockStyle}"/>
                            <TextBlock x:Name="ForceFetchDescriptionText" 
                                       Text="Loads achievement counts and DRM status for all games. This may take a few minutes."
                                       Style="{StaticResource CaptionTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                       TextWrapping="Wrap"/>
                            <TextBlock x:Name="ForceFetchStatusText"
                                       Style="{StaticResource CaptionTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                       Margin="0,4,0,0"
                                       Visibility="Collapsed"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8" VerticalAlignment="Top">
                            <Button x:Name="CancelFetchButton"
                                    Content="Cancel"
                                    Click="CancelFetchButton_Click"
                                    Visibility="Collapsed"/>
                            <Button x:Name="ForceFetchButton"
                                    Style="{StaticResource AccentButtonStyle}"
                                    Content="Sync Now"
                                    Click="ForceFetchButton_Click"/>
                        </StackPanel>
                    </Grid>
                    
                    <!-- Progress Bar -->
                    <StackPanel x:Name="FetchProgressPanel" Visibility="Collapsed" Spacing="8">
                        <ProgressBar x:Name="FetchProgressBar" 
                                     Minimum="0" 
                                     Maximum="100" 
                                     Value="0"/>
                        <TextBlock x:Name="FetchProgressText"
                                   Style="{StaticResource CaptionTextBlockStyle}"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>
